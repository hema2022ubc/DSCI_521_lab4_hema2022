---
title: "Introduction to R language for beginners"
output: html_document
author: 'He Ma'
date: "2022-09-27"
---

```{r setup, include=FALSE}
library(nycflights13)
library(palmerpenguins)
library(rlang)
library(testthat)
library(tidyverse)
library(ggthemes)
options(repr.matrix.max.rows = 10)
knitr::opts_chunk$set(echo = TRUE)
```
## Function in R

This is an exercise for function in R. You can write your own functions in order to make repetitive operations using a single command. Starting by defining the function “my_function” and the input parameter(s) that the user will feed to the function. Then define the operation that you desire to program in the body of the function within curly braces ({}). Finally, assign the result of the function in the return statement.

```{r}
economist_scatter <- function(data, x, y, colour_by){
   
    { if (!is.data.frame(data)){
      stop("Can only compute dataframe.")
    }
 }     

    

library(ggthemes)
ggplot(data, aes(x = {{x}}, y = {{y}})) +
    geom_point(alpha = 0.5, size = 2, aes(colour = {{colour_by}})) +
    theme_economist()
   
}

economist_scatter(penguins, body_mass_g, flipper_length_mm, sex)
```

## Tidy data

This is an example for `fliter` and `select`. The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures. Filtering and selectiong data is one of the very basic operation when you work with data. 

```{r pressure, echo=TRUE}
dataset <-  tribble(
       ~name, ~alignment,  ~gender,          ~publisher,
   "Magneto",      "bad",   "male",            "Marvel",
     "Storm",     "good", "female",            "Marvel",
  "Mystique",      "bad", "female",            "Marvel",
    "Batman",     "good",   "male",                "DC",
     "Joker",      "bad",   "male",                "DC",
  "Catwoman",      "bad", "female",                "DC",
   "Hellboy",     "good",   "male", "Dark Horse Comics"
  )
dataset |> 
  filter(publisher == 'DC') |> 
  select(name:gender)  
  
```

